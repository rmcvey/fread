/*! fread - v0.1.0 - 2014-03-22
* http://github.com/rmcvey
* Copyright (c) 2014 Rob McVey; Licensed  */
!function(a,b){"use strict";"function"==typeof define&&define.amd?define([],b):a.fread=b()}(this,function(){"use strict";function a(a){if("undefined"==typeof document)return!1;var b={"in":'input[type="file"]',out:"table",pattern:"text.*",before:function(){},after:function(){}};if(this.params=this._util.merge(b,a),this.in_target=this.params.in&&document.querySelector(this.params.in)||document.querySelector(b.in),this.out_target=this.params.out&&document.querySelector(this.params.out)||b.out,!1 in this.in_target||!1 in this.out_target)return!1;var c=this;this.in_target.addEventListener("change",function(a){c.params.before.call(a),c.handler.call(c,a,c.params.after)},!1)}return a.prototype={in_target:null,out_target:null,data:[],handler:function(a,b){for(var c,d=a.target.files,e=this,f=0;c=d[f];f++)c.type.match(e.params.out.pattern)&&e._readers.csv.call(e,c,a,b)},_util:{merge:function(a,b){if("undefined"==typeof b||!b)return a;for(var c in a)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}},_readers:{csv:function(a,b,c){var d=new FileReader,e=this,f=!1;d.onload=function(){return function(a){var b=(document.createElement("span"),a.target.result.split("\n")),d=0;b.forEach(function(a,b){var c=a.split(","),g=e.out_target.querySelector("tbody"),h=document.createElement("tr"),i="",j=0,k="<td>",l="</td>";for(0!=b||f||(g=e.out_target.querySelector("thead"),d=c.length,f=!0,k="<th>",l="</th>");d>j;j++)i+=[k,c[j],l].join("");h.innerHTML=i,g.appendChild(h),e.data.push(c)}),c.call(e,e.data)}}(a),d.readAsText(a)}}},a});